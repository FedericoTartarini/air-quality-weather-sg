(this["webpackJsonpair-quality-sg-react"]=this["webpackJsonpair-quality-sg-react"]||[]).push([[4],{14:function(e,t,a){e.exports=a.p+"static/media/logo192.9a9969a0.png"},19:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(){return r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("div",{className:"loader"}))}},34:function(e,t,a){e.exports=a(63)},39:function(e,t,a){},46:function(e,t,a){e.exports=a.p+"static/media/logo192.ad9688c3.webp"},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),o=a.n(l),i=(a(39),a(9)),c=a(8),s=a(14);var m=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.createElement("nav",{className:"container mx-auto flex items-center justify-between flex-wrap p-6"},r.a.createElement(c.b,{to:"/"},r.a.createElement("div",{className:"flex items-center flex-shrink-0"},r.a.createElement("img",{src:s,alt:"logo website",width:50}),r.a.createElement("span",{className:"font-semibold text-xl tracking-tight ml-3 w-40"},"Air Quality and Weather - SG"))),r.a.createElement("div",{className:"block xl:hidden"},r.a.createElement("button",{className:"flex items-center px-3 py-2 border rounded hover:text-gray-700 hover:border-white",type:"button",onClick:function(){return n(!a)}},r.a.createElement("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"Menu"),r.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})))),r.a.createElement("div",{className:"w-full block flex-end xl:flex xl:items-center xl:w-auto"+(a?"":" hidden"),onClick:function(){return n(!a)}},r.a.createElement("div",{className:"text-sm xl:flex-grow"},r.a.createElement(c.b,{to:"/"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 hover:text-gray-600 ml-4"},"Home")),r.a.createElement(c.b,{to:"/charts"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 hover:text-gray-600 ml-4"},"Charts")),r.a.createElement(c.b,{to:"/forecast"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"Forecast")),r.a.createElement(c.b,{to:"/mapPollution"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"Map Pollution")),r.a.createElement(c.b,{to:"/about"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"About")))))},u=a(13),d=a(12),f=a(14);var h=function(){return r.a.createElement("footer",{className:"text-gray-900 body-font absolute w-full"},r.a.createElement("div",{className:"container px-5 py-8 mx-auto flex items-center sm:flex-row flex-col"},r.a.createElement("span",{className:"flex title-font font-medium items-center md:justify-start justify-center"},r.a.createElement("picture",{className:"flex justify-center align-center"},r.a.createElement("source",{type:"image/webp",srcSet:a(46)}),r.a.createElement("source",{type:"image/png",srcSet:a(14)}),r.a.createElement("img",{src:f,className:"w-3/6 rounded-full border-4 shadow-lg",alt:"logo website"})),r.a.createElement("div",null,r.a.createElement("p",{className:"text-xl"},"Air Quality and Weather"),r.a.createElement("p",{className:"text-xs ml-3"},"v 0.0.1"))),r.a.createElement("p",{className:"text-sm sm:ml-4 sm:pl-4 sm:border-l-2 sm:border-gray-200 sm:py-2 sm:mt-0 mt-4"},"\xa9 2020",r.a.createElement("a",{href:"https://federicotartarini.github.io",className:"ml-1",rel:"noopener noreferrer",target:"_blank"},"Federico Tartarini")),r.a.createElement("span",{className:"inline-flex text-gray-700 sm:ml-auto sm:mt-0 mt-4 justify-center sm:justify-start"},r.a.createElement("a",{className:"mx-3",href:"https://www.linkedin.com/in/federico-tartarini-3991995b/","aria-label":"LinkedIn"},r.a.createElement(d.a,{icon:u.c,size:"2x"})),r.a.createElement("a",{className:"mx-3",href:"https://github.com/FedericoTartarini","aria-label":"GitHub"},r.a.createElement(d.a,{icon:u.a,size:"2x"})),r.a.createElement("a",{className:"mx-3",href:"https://play.google.com/store/apps/details?id=com.airqualityapp","aria-label":"GooglePlay"},r.a.createElement(d.a,{icon:u.b,size:"2x"})))))},g=a(33),p=a.n(g);function b(e){var t=Object(n.useState)({loading:!1,data:null,error:!1}),a=Object(i.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){l({loading:!0,data:null,error:!1}),console.log("Requesting API data: "+e),p.a.get(e).then((function(e){l({loading:!1,data:e.data,error:!1})})).catch((function(){l({loading:!1,data:null,error:!0})}))}),[e.split(":")[1]]),r}var v=a(2),E=a(19),w=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,249))})),x=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(14)]).then(a.bind(null,250))})),y=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(15)]).then(a.bind(null,251))})),N=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(9)]).then(a.bind(null,252))})),k=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(11)]).then(a.bind(null,253))})),O=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(3),a.e(1),a.e(8)]).then(a.bind(null,258))})),j=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(3),a.e(1),a.e(16)]).then(a.bind(null,256))})),S=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(1),a.e(13)]).then(a.bind(null,255))})),P=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(2),a.e(6),a.e(1),a.e(12)]).then(a.bind(null,257))}));var z=function(){var e=(new Date).getTimezoneOffset();e-=480+e;var t=new Date(Date.now()-6e4*e).toISOString().substr(0,19),a="https://api.data.gov.sg/v1/environment/relative-humidity?date_time="+t,l="https://api.data.gov.sg/v1/environment/air-temperature?date_time="+t,o="https://api.data.gov.sg/v1/environment/2-hour-weather-forecast?date_time="+t,s="https://api.data.gov.sg/v1/environment/24-hour-weather-forecast?date_time="+t;if("00"===t.split("T")[1].split(":")[0]){var u=(new Date).getTimezoneOffset();u-=360+u,t=new Date(Date.now()-6e4*u).toISOString().substr(0,19)}var d=t.split("T")[0],f="https://api.data.gov.sg/v1/environment/pm25?date="+d,g=b("https://api.data.gov.sg/v1/environment/psi?date="+d),p=b(l),z=b(a),A=b(f),W=b(o),I=b(s),T=Object(n.useState)({loading:!1,data:{accuracy:2678,altitude:null,altitudeAccuracy:null,heading:null,latitude:1.3271039999999998,longitude:103.841792,speed:null},error:!1}),q=Object(i.a)(T,2),H=q[0],R=q[1],U=Object(n.useState)(!0),D=Object(i.a)(U,2),L=D[0],_=D[1];function F(e){R({loading:!1,data:e.coords,error:!1})}function C(e){switch(e.code){case e.PERMISSION_DENIED:alert("You denied the request for Geolocation.\nPlease allow us to access your location if you want to see the data for your current location.");break;case e.POSITION_UNAVAILABLE:alert("Location information is unavailable.\nWe are assuming you are in the center of Singapore");break;case e.TIMEOUT:alert("The request to get user location timed out.\nWe are assuming you are in the center of Singapore");break;case e.UNKNOWN_ERR:alert("An unknown error occurred.\nWe are assuming you are in the center of Singapore");break;default:alert("An unknown error occurred.\nWe are assuming you are in the center of Singapore")}}Object(n.useEffect)((function(){try{navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state?(B(),_(!1)):console.log("permission not granted")}))}catch(e){}}),[t]);var M={enableHighAccuracy:!0,timeout:3e3,maximumAge:0};function B(){navigator.geolocation?navigator.geolocation.getCurrentPosition(F,C,M):alert("Geolocation is not supported by this browser")}return r.a.createElement(c.a,{basename:"/air-quality-weather-sg"},r.a.createElement("div",{className:"relative pb-10 min-h-screen"},r.a.createElement(m,null),r.a.createElement(n.Suspense,{fallback:r.a.createElement(E.a,null)},r.a.createElement(v.c,null,r.a.createElement(v.a,{exact:!0,path:"/"},r.a.createElement(S,{dataPSI:g,dataTmp:p,dataRH:z,dataFor2H:W,dataFor24H:I,dataPM25:A,locationUser:H,RequestedUseLocation:B,showRequestLocButton:L})),r.a.createElement(v.a,{path:"/charts"},r.a.createElement(P,{data:g,locationUser:H})),r.a.createElement(v.a,{path:"/forecast"},r.a.createElement(j,{dataFor2H:W,dataFor24H:I})),r.a.createElement(v.a,{path:"/mapPollution"},r.a.createElement(O,{data:g})),r.a.createElement(v.a,{path:"/about"},r.a.createElement(N,null)),r.a.createElement(v.a,{path:"/psi"},r.a.createElement(k,null)),r.a.createElement(v.a,{path:"/pm25"},r.a.createElement(x,null)),r.a.createElement(v.a,{path:"/weather"},r.a.createElement(y,null)),r.a.createElement(v.a,{path:"/climate"},r.a.createElement(w,null)))),r.a.createElement("div",null,r.a.createElement(h,null))))},A=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):t&&t.onSuccess&&t.onSuccess(e))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(z,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/air-quality-weather-sg",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/air-quality-weather-sg","/service-worker.js");A?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):W(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):W(t,e)}))}}()}},[[34,5,7]]]);
//# sourceMappingURL=main.054ac9ec.chunk.js.map
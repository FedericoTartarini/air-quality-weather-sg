(this["webpackJsonpair-quality-sg-react"]=this["webpackJsonpair-quality-sg-react"]||[]).push([[5],{32:function(e,t,a){e.exports=a.p+"static/media/logo192.9a9969a0.png"},34:function(e,t,a){e.exports=a(60)},39:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(18),o=a.n(r),c=(a(39),a(10)),i=a(4),s=a(32);var m=function(){var e=l.a.useState(!1),t=Object(c.a)(e,2),a=t[0],n=t[1];return l.a.createElement("nav",{className:"container mx-auto flex items-center justify-between flex-wrap p-6"},l.a.createElement(i.b,{to:"/"},l.a.createElement("div",{className:"flex items-center flex-shrink-0"},l.a.createElement("img",{src:s,alt:"logo Air Quality and Weather SG",width:50}),l.a.createElement("span",{className:"font-semibold text-xl tracking-tight ml-3 w-40"},"Air Quality and Weather SG"))),l.a.createElement("div",{className:"block xl:hidden"},l.a.createElement("button",{className:"flex items-center px-3 py-2 border rounded hover:text-gray-700 hover:border-white",type:"button",onClick:function(){return n(!a)}},l.a.createElement("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement("title",null,"Menu"),l.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})))),l.a.createElement("div",{className:"w-full block flex-end xl:flex xl:items-center xl:w-auto"+(a?"":" hidden"),onClick:function(){return n(!a)}},l.a.createElement("div",{className:"text-sm xl:flex-grow"},l.a.createElement(i.b,{to:"/"},l.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 hover:text-gray-600 ml-4"},"Home")),l.a.createElement(i.b,{to:"/charts"},l.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 hover:text-gray-600 ml-4"},"Charts")),l.a.createElement(i.b,{to:"/forecast"},l.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"Forecast")),l.a.createElement(i.b,{to:"/mapPollution"},l.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"Air Quality Map")),l.a.createElement(i.b,{to:"/about"},l.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"About")))))},u=a(16),d=a(9),h=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(0),a.e(13)]).then(a.bind(null,256))})),E=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(0),a.e(18)]).then(a.bind(null,257))})),b=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(2),a.e(0),a.e(17)]).then(a.bind(null,259))}));var f=function(e){var t=e.dataPSI,a=e.dataTmp,r=e.dataRH,o=e.dataFor2H,c=e.dataFor24H,s=e.dataPM25,m=e.locationUser,f=e.RequestedUseLocation,p=e.showRequestLocButton;return l.a.createElement("div",null,l.a.createElement(u.a,null,l.a.createElement("title",null,"Air quality and Weather Singapore"),l.a.createElement("meta",{name:"description",content:"This page shows you the current temperature, relative humidity, PM 2.5, PSI readings."})),l.a.createElement(n.Suspense,{fallback:l.a.createElement(d.a,null)},l.a.createElement("div",{className:"flex"},l.a.createElement(E,{dataPSI:t,locationUser:m}))),l.a.createElement(n.Suspense,{fallback:l.a.createElement(d.a,null)},l.a.createElement(b,{dataPSI:t,dataTmp:a,dataRH:r,dataFor2H:o,dataFor24H:c,dataPM25:s,locationUser:m,RequestedUseLocation:f,showRequestLocButton:p})),l.a.createElement(n.Suspense,{fallback:l.a.createElement(d.a,null)},l.a.createElement(h,{dataPSI:t,locationUser:m})),l.a.createElement("div",{className:"container mx-auto my-3 flex-col p-8 items-center justify-center rounded overflow-hidden border shadow-lg"},l.a.createElement("div",{className:"text-gray-800 mb-2"},l.a.createElement("div",{className:"font-bold text-md mb-2"},"Learn more about:"),l.a.createElement("ul",{className:"list-disc list-inside"},l.a.createElement("li",null,l.a.createElement(i.b,{to:"/climate"},"Climate of Singapore")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/psi"},"Pollutant Standards Index (PSI)")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/pm25"},"1-h Particular Matter 2.5 \xb5m")),l.a.createElement("li",null,l.a.createElement(i.b,{to:"/weather"},"Weather forecast data source"))))))},p=a(31),g=a.n(p);function v(e){var t=Object(n.useState)({loading:!1,data:null,error:!1}),a=Object(c.a)(t,2),l=a[0],r=a[1];return Object(n.useEffect)((function(){r({loading:!0,data:null,error:!1}),console.log("Requesting API data: "+e),g.a.get(e).then((function(e){r({loading:!1,data:e.data,error:!1})})).catch((function(){r({loading:!1,data:null,error:!0})}))}),[e.split(":")[1]]),l}var y=a(2),x=Object(n.lazy)((function(){return Promise.all([a.e(3),a.e(9)]).then(a.bind(null,260))})),w=Object(n.lazy)((function(){return a.e(15).then(a.bind(null,250))})),S=Object(n.lazy)((function(){return a.e(16).then(a.bind(null,251))})),k=Object(n.lazy)((function(){return a.e(10).then(a.bind(null,252))})),O=Object(n.lazy)((function(){return a.e(11).then(a.bind(null,253))})),N=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(4),a.e(0),a.e(8)]).then(a.bind(null,262))})),P=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(4),a.e(0),a.e(19)]).then(a.bind(null,258))})),j=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(2),a.e(3),a.e(0),a.e(14)]).then(a.bind(null,261))})),I=Object(n.lazy)((function(){return Promise.all([a.e(2),a.e(20),a.e(12)]).then(a.bind(null,255))}));var z=function(){var e=(new Date).getTimezoneOffset();e-=480+e;var t=new Date(Date.now()-6e4*e).toISOString().substr(0,19),a="https://api.data.gov.sg/v1/environment/relative-humidity?date_time="+t,r="https://api.data.gov.sg/v1/environment/air-temperature?date_time="+t,o="https://api.data.gov.sg/v1/environment/2-hour-weather-forecast?date_time="+t,s="https://api.data.gov.sg/v1/environment/24-hour-weather-forecast?date_time="+t;if("00"===t.split("T")[1].split(":")[0]){var u=(new Date).getTimezoneOffset();u-=360+u,t=new Date(Date.now()-6e4*u).toISOString().substr(0,19)}var h=t.split("T")[0],E="https://api.data.gov.sg/v1/environment/pm25?date="+h,b=v("https://api.data.gov.sg/v1/environment/psi?date="+h),p=v(r),g=v(a),z=v(E),H=v(o),A=v(s),q=Object(n.useState)({loading:!1,data:{accuracy:2678,altitude:null,altitudeAccuracy:null,heading:null,latitude:1.3271039999999998,longitude:103.841792,speed:null},error:!1}),R=Object(c.a)(q,2),T=R[0],U=R[1],W=Object(n.useState)(!0),L=Object(c.a)(W,2),M=L[0],F=L[1];function D(e){U({loading:!1,data:e.coords,error:!1})}function B(e){switch(e.code){case e.PERMISSION_DENIED:alert("You denied the request for Geolocation.\nPlease allow us to access your location if you want to see the data for your current location.");break;case e.POSITION_UNAVAILABLE:alert("Location information is unavailable.\nWe are assuming you are in the center of Singapore");break;case e.TIMEOUT:alert("The request to get user location timed out.\nWe are assuming you are in the center of Singapore");break;case e.UNKNOWN_ERR:alert("An unknown error occurred.\nWe are assuming you are in the center of Singapore");break;default:alert("An unknown error occurred.\nWe are assuming you are in the center of Singapore")}}Object(n.useEffect)((function(){try{navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state?(C(),F(!1)):console.log("permission not granted")}))}catch(e){}}),[t]);var _={enableHighAccuracy:!0,timeout:3e3,maximumAge:0};function C(){navigator.geolocation?navigator.geolocation.getCurrentPosition(D,B,_):alert("Geolocation is not supported by this browser")}return l.a.createElement(i.a,{basename:"/"},l.a.createElement("div",{className:"relative pb-10 min-h-screen"},l.a.createElement(m,null),l.a.createElement(y.c,null,l.a.createElement(y.a,{exact:!0,path:"/"},l.a.createElement(f,{dataPSI:b,dataTmp:p,dataRH:g,dataFor2H:H,dataFor24H:A,dataPM25:z,locationUser:T,RequestedUseLocation:C,showRequestLocButton:M})),l.a.createElement(n.Suspense,{fallback:l.a.createElement(d.a,null)},l.a.createElement(y.a,{path:"/charts"},l.a.createElement(j,{data:b,locationUser:T})),l.a.createElement(y.a,{path:"/forecast"},l.a.createElement(P,{dataFor2H:H,dataFor24H:A})),l.a.createElement(y.a,{path:"/mapPollution"},l.a.createElement(N,{data:b})),l.a.createElement(y.a,{path:"/about"},l.a.createElement(k,null)),l.a.createElement(y.a,{path:"/psi"},l.a.createElement(O,null)),l.a.createElement(y.a,{path:"/pm25"},l.a.createElement(w,null)),l.a.createElement(y.a,{path:"/weather"},l.a.createElement(S,null)),l.a.createElement(y.a,{path:"/climate"},l.a.createElement(x,null)))),l.a.createElement(n.Suspense,{fallback:l.a.createElement(d.a,null)},l.a.createElement("div",null,l.a.createElement(I,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(){return l.a.createElement("div",{className:"container mx-auto"},l.a.createElement("div",{className:"flex justify-center"},l.a.createElement("div",{className:"loader"})))}}},[[34,6,7]]]);
//# sourceMappingURL=main.44cc18f9.chunk.js.map
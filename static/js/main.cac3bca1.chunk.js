(this["webpackJsonpair-quality-sg-react"]=this["webpackJsonpair-quality-sg-react"]||[]).push([[5],{15:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(){return r.a.createElement("div",{className:"container mx-auto"},r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("div",{className:"loader"})))}},43:function(e,t,a){e.exports=a.p+"static/media/logo192.9a9969a0.png"},44:function(e,t,a){e.exports=a.p+"static/media/logo192.ad9688c3.webp"},53:function(e,t,a){e.exports=a(63)},55:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=(a(55),a(18)),o=a(8),i=a(43);var c=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],c=t[1];return r.a.createElement("nav",{className:"container mx-auto flex items-center justify-between flex-wrap p-6"},r.a.createElement(o.b,{to:"/"},r.a.createElement("div",{className:"flex items-center flex-shrink-0"},r.a.createElement("picture",null,r.a.createElement("source",{type:"image/webp",srcSet:a(44)}),r.a.createElement("source",{type:"image/png",srcSet:i}),r.a.createElement("img",{src:i,alt:"logo Air Quality and Weather SG",width:50})),r.a.createElement("span",{className:"font-semibold text-xl tracking-tight ml-3 w-40"},"Air Quality and Weather SG"))),r.a.createElement("div",{className:"block xl:hidden"},r.a.createElement("button",{className:"flex items-center px-3 py-2 border rounded hover:text-gray-700 hover:border-white",type:"button",onClick:function(){return c(!n)}},r.a.createElement("svg",{className:"fill-current h-3 w-3",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("title",null,"Menu"),r.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"})))),r.a.createElement("div",{className:"w-full block flex-end xl:flex xl:items-center xl:w-auto"+(n?"":" hidden"),onClick:function(){return c(!n)}},r.a.createElement("div",{className:"text-sm xl:flex-grow"},r.a.createElement(o.b,{to:"/"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 hover:text-gray-600 ml-4"},"Home")),r.a.createElement(o.b,{to:"/air-pollution-singapore-haze"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 hover:text-gray-600 ml-4"},"Charts")),r.a.createElement(o.b,{to:"/weather-forecast-singapore"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"Forecast")),r.a.createElement(o.b,{to:"/map-air-pollution-singapore-haze"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"Air Quality Map")),r.a.createElement(o.b,{to:"/about-air-quality-and-weather-sg"},r.a.createElement("span",{className:"block mt-4 xl:inline-block xl:mt-0 over:text-gray-600 ml-4"},"About")))))},s=a(28),m=a(15),u=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(0),a.e(10)]).then(a.bind(null,270))})),d=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(0),a.e(17)]).then(a.bind(null,271))})),h=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(2),a.e(0),a.e(15)]).then(a.bind(null,273))}));var p=function(e){var t=e.dataPSI,a=e.dataTmp,l=e.dataRH,i=e.dataFor2H,c=e.dataFor24H,p=e.dataPM25,g=e.locationUser,E=e.RequestedUseLocation,b=e.showRequestLocButton;return r.a.createElement("div",null,r.a.createElement(s.a,null,r.a.createElement("title",null,"Air quality and Weather Singapore"),r.a.createElement("meta",{name:"description",content:"This page allows you to monitor and track in real-time the standard indexes of the major outdoor\r pollutants in Singapore. In addition you can monitor the current temperature and relative humidity in your location as well as the\r weather forecasts for Singapore"})),r.a.createElement(n.Suspense,{fallback:r.a.createElement(m.a,null)},r.a.createElement("div",{className:"flex"},r.a.createElement(d,{dataPSI:t,locationUser:g}))),r.a.createElement(n.Suspense,{fallback:r.a.createElement(m.a,null)},r.a.createElement(h,{dataPSI:t,dataTmp:a,dataRH:l,dataFor2H:i,dataFor24H:c,dataPM25:p,locationUser:g,RequestedUseLocation:E,showRequestLocButton:b})),r.a.createElement(n.Suspense,{fallback:r.a.createElement(m.a,null)},r.a.createElement(u,{dataPSI:t,locationUser:g})),r.a.createElement("div",{className:"container mx-auto my-3 p-8 items-center justify-center rounded overflow-hidden border shadow-lg"},r.a.createElement("div",{className:"text-gray-800 mb-2"},r.a.createElement("div",{className:"font-bold text-md mb-2"},"Learn more about:"),r.a.createElement("div",null,r.a.createElement("ul",{className:"list-disc list-inside"},r.a.createElement("li",{className:"py-1"},r.a.createElement(o.b,{to:"/climate-of-singapore"},"The climate of Singapore")),r.a.createElement("li",{className:"py-1"},r.a.createElement(o.b,{to:"/pollutant-standards-index-singapore"},"What the Pollutant Standards Index (PSI) measures")),r.a.createElement("li",{className:"py-1"},r.a.createElement(o.b,{to:"/pm25"},"What is 1-h Particular Matter 2.5 \xb5m")),r.a.createElement("li",{className:"py-1"},r.a.createElement(o.b,{to:"/weather-singapore"},"Where we are getting the data from")))))))},g=a(6),E=a(17),b=Object(n.lazy)((function(){return Promise.all([a.e(3),a.e(9)]).then(a.bind(null,274))})),f=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(0),a.e(19)]).then(a.bind(null,264))})),v=Object(n.lazy)((function(){return a.e(14).then(a.bind(null,265))})),y=Object(n.lazy)((function(){return a.e(11).then(a.bind(null,266))})),w=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(0),a.e(13)]).then(a.bind(null,267))})),x=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(4),a.e(0),a.e(8)]).then(a.bind(null,276))})),N=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(4),a.e(0),a.e(18)]).then(a.bind(null,272))})),S=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(2),a.e(3),a.e(0),a.e(12)]).then(a.bind(null,275))})),k=Object(n.lazy)((function(){return Promise.all([a.e(2),a.e(20),a.e(16)]).then(a.bind(null,269))}));var O=function(){var e=(new Date).getTimezoneOffset();e-=480+e;var t=new Date(Date.now()-6e4*e).toISOString().substr(0,19),a="https://api.data.gov.sg/v1/environment/relative-humidity?date_time="+t,i="https://api.data.gov.sg/v1/environment/air-temperature?date_time="+t,s="https://api.data.gov.sg/v1/environment/2-hour-weather-forecast?date_time="+t,u="https://api.data.gov.sg/v1/environment/24-hour-weather-forecast?date_time="+t;if("00"===t.split("T")[1].split(":")[0]){var d=(new Date).getTimezoneOffset();d-=360+d,t=new Date(Date.now()-6e4*d).toISOString().substr(0,19)}var h=t.split("T")[0],O="https://api.data.gov.sg/v1/environment/pm25?date="+h,P=function(e){var t=Object(E.useQuery)(e,(function(){return fetch(e).then((function(e){return e.json()}))})),a=t.isLoading,n=t.error;return{data:t.data,loading:a,error:n}},j=P("https://api.data.gov.sg/v1/environment/psi?date="+h),z=P(s),I=P(i),H=P(a),q=P(O),A=P(u);I.data&&1===I.data.items[0].readings.length&&(I.error=!0);var T=Object(n.useState)({loading:!1,data:{accuracy:2678,altitude:null,altitudeAccuracy:null,heading:null,latitude:1.3271039999999998,longitude:103.841792,speed:null},error:!1}),W=Object(l.a)(T,2),R=W[0],U=W[1],L=Object(n.useState)(!0),F=Object(l.a)(L,2),M=F[0],C=F[1];function D(e){U({loading:!1,data:e.coords,error:!1})}function B(e){switch(e.code){case e.PERMISSION_DENIED:alert("You denied the request for Geolocation.\nPlease allow us to access your location if you want to see the data for your current location.");break;case e.POSITION_UNAVAILABLE:alert("Location information is unavailable.\nWe are assuming you are in the center of Singapore");break;case e.TIMEOUT:alert("The request to get user location timed out.\nWe are assuming you are in the center of Singapore");break;case e.UNKNOWN_ERR:alert("An unknown error occurred.\nWe are assuming you are in the center of Singapore");break;default:alert("An unknown error occurred.\nWe are assuming you are in the center of Singapore")}}Object(n.useEffect)((function(){try{navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state?(_(),C(!1)):console.log("permission not granted")}))}catch(e){}}),[t]);var Q={enableHighAccuracy:!0,timeout:3e3,maximumAge:0};function _(){navigator.geolocation?navigator.geolocation.getCurrentPosition(D,B,Q):alert("Geolocation is not supported by this browser")}return r.a.createElement(o.a,{basename:"/air-quality-weather-sg"},r.a.createElement("div",{className:"relative pb-10 min-h-screen"},r.a.createElement(c,null),r.a.createElement(g.c,null,r.a.createElement(g.a,{exact:!0,path:"/"},r.a.createElement(p,{dataPSI:j,dataTmp:I,dataRH:H,dataFor2H:z,dataFor24H:A,dataPM25:q,locationUser:R,RequestedUseLocation:_,showRequestLocButton:M})),r.a.createElement(n.Suspense,{fallback:r.a.createElement(m.a,null)},r.a.createElement(g.a,{path:"/air-pollution-singapore-haze"},r.a.createElement(S,{data:j,locationUser:R})),r.a.createElement(g.a,{path:"/weather-forecast-singapore"},r.a.createElement(N,{dataFor2H:z,dataFor24H:A})),r.a.createElement(g.a,{path:"/map-air-pollution-singapore-haze"},r.a.createElement(x,{data:j})),r.a.createElement(g.a,{path:"/about-air-quality-and-weather-sg"},r.a.createElement(y,null)),r.a.createElement(g.a,{path:"/pollutant-standards-index-singapore"},r.a.createElement(w,null)),r.a.createElement(g.a,{path:"/pm25"},r.a.createElement(f,null)),r.a.createElement(g.a,{path:"/weather-singapore"},r.a.createElement(v,null)),r.a.createElement(g.a,{path:"/climate-of-singapore"},r.a.createElement(b,null)))),r.a.createElement(n.Suspense,{fallback:r.a.createElement(m.a,null)},r.a.createElement("div",null,r.a.createElement(k,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(22),j=new E.QueryClient,z=document.getElementById("root");z.hasChildNodes()?Object(P.hydrate)(r.a.createElement(E.QueryClientProvider,{client:j},r.a.createElement(O,null)),z):Object(P.render)(r.a.createElement(E.QueryClientProvider,{client:j},r.a.createElement(O,null)),z),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,6,7]]]);
//# sourceMappingURL=main.cac3bca1.chunk.js.map